{% for field in include.fields %}
  {% comment %}
    Assign variables
  {% endcomment %}
  {% assign label = field.label %}
  {% assign helptext = field.helptext %}
  {% capture name %}{{ title | slugify }}-field-{{ forloop.index }}{% endcapture %}
  {% assign options  = field.options %}
  {% assign error  = field.error %}
  {% assign optional = field.optional %}
  {% assign group  = field.group %}
  {% assign fields  = field.fields %}
  {% assign unit  = field.unit %}
  {% assign other  = field.other %}
  {% assign level = field.level %}
  {% assign url = field.url %}
  {% assign description = field.description %}
  {% assign maxlength = field.maxlength %}

  {% comment %}
    Address field formats
  {% endcomment %}

  {% if field.address-fields %}
    {% assign address-fields = field.address-fields %}
  {% else %}
    {% assign address-fields = 'full' %}
  {% endif %}


  {% comment %}
    Include the appropriate markup for each field type
  {% endcomment %}

    {% if field.group %}
      {% include fields/group.html group=group field=fields %}
    {% elsif field.type == 'header' %}
      {% include fields/header.html level=level label=label %}
    {% elsif field.type == 'paragraph' %}
      {% include fields/paragraph.html label=label %}
    {% elsif field.type == 'link' %}
      {% include fields/link.html label=label url=url description=description %}
    {% else %}
      <div class="form-group">
        {% if field.type == 'radio' %}
          {% include fields/radio.html label=label helptext=helptext option=options name=name error=error other=other %}
        {% elsif field.type == 'checkbox' %}
          {% include fields/checkbox.html label=label helptext=helptext option=options name=name error=error %}
        {% elsif field.type == 'select' %}
          {% include fields/select.html label=label helptext=helptext option=options name=name error=error %}
        {% elsif field.type == 'address' %}
          {% include fields/address.html label=label helptext=helptext name=name error=error address-fields=address-fields %}
        {% elsif field.type == 'price' %}
          {% include fields/price.html label=label helptext=helptext name=name error=error %}
        {% elsif field.type == 'email' %}
          {% include fields/email.html label=label helptext=helptext name=name error=error %}
        {% elsif field.type == 'phone' %}
          {% include fields/phone.html label=label helptext=helptext name=name error=error %}
        {% elsif field.type == 'textarea' %}
          {% include fields/textarea.html label=label helptext=helptext name=name error=error%}
        {% elsif field.type == 'number' %}
          {% include fields/number.html label=label helptext=helptext name=name error=error unit=unit maxlength=maxlength %}
        {% elsif field.type == 'file' %}
          {% include fields/file.html label=label helptext=helptext name=name error=error %}
        {% else %}
          {% include fields/text.html helptext=helptext name=name error=error maxlength=maxlength %}
        {% endif %}
        <p class="help-block with-errors"></p>
      </div>
    {% endif %}
{% endfor %}