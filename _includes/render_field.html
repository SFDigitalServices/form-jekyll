{% for field in fields %}
  {% comment %}
    Assign variables
  {% endcomment %}

  {% if field.address-fields %}
    {% assign address-fields = field.address-fields %}
  {% else %}
    {% assign address-fields = 'full' %}
  {% endif %}

  {% assign description = field.description %}
  {% assign error  = field.error %}
  {% assign fields  = field.fields %}
  {% assign group  = field.group %}
  {% assign helptext = field.helptext %}
  {% assign label = field.label %}
  {% assign level = field.level %}
  {% assign maxlength = field.maxlength %}
  {% capture name %}{{ title | slugify }}-field-{{ forloop.index }}{% endcapture %}
  {% assign optional = field.optional %}
  {% assign options  = field.options %}
  {% assign other  = field.other %}
  {% assign unit  = field.unit %}
  {% assign url = field.url %}

  {% comment %}
    Render each field
  {% endcomment %}

  {% capture includepath %}fields/{{field.type}}.html{% endcapture %}

  {% if field.group %}
    {% include fields/group.html %}
  {% elsif field.type == 'header' %}
    {% include {{ includepath }} %}
  {% elsif field.type == 'paragraph' %}
    {% include {{ includepath }} %}
  {% elsif field.type == 'link' %}
    {% include {{ includepath }} %}
  {% else %}
    <div class="form-group">
      {% if field.type %}
        {% include {{ includepath }} %}
      {% else %}
        {% include fields/text.html %}
      {% endif %}
      <p class="help-block with-errors"></p>
    </div>
  {% endif %}

{% endfor %}