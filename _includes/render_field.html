{% for field in fields %}
  {% comment %}
    Assign variables
  {% endcomment %}

  {% if field.address-fields %}
    {% assign address-fields = field.address-fields %}
  {% else %}
    {% assign address-fields = 'full' %}
  {% endif %}

  {% assign description = field.description %}
  {% assign error = field.error %}
  {% assign fields = field.fields %}
  {% assign group = field.group %}
  {% assign helptext = field.helptext %}
  {% assign if = field.if %}
  {% assign label = field.label %}
  {% assign level = field.level %}
  {% assign maxlength = field.maxlength %}
  {% capture name %}{{ label | slugify | escape }}-field-{{ forloop.index }}{% endcapture %}
  {% assign optional = field.optional %}
  {% assign options = field.options %}
  {% assign other = field.other %}
  {% assign shows = field.shows %}
  {% assign size = field.size %}
  {% assign unit = field.unit %}
  {% assign url = field.url %}

  {% comment %}
    Render each field
  {% endcomment %}

  {% capture includepath %}fields/{{field.type}}.html{% endcapture %}

  {% if field.group %}
    {% include fields/group.html %}
  {% elsif field.type == 'header' %}
    {% include {{ includepath }} %}
  {% elsif field.type == 'paragraph' %}
    {% include {{ includepath }} %}
  {% elsif field.type == 'link' %}
    {% include {{ includepath }} %}
  {% else %}
    {% if field.type %}
      <div class="form-group field-{{ field.type }}" data-fieldtype="{{ field.type }}" data-name="{{ name }}">
        {% include {{ includepath }} %}
        <p class="help-block with-errors"></p>
      </div>
    {% else %}
      <div class="form-group field-text" data-fieldtype="text" data-name="{{ name }}">
        {% include fields/text.html %}
        <p class="help-block with-errors"></p>
      </div>
    {% endif %}
  {% endif %}

{% endfor %}